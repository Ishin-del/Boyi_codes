## **Numexpr库**



> 传统的比如大小比较，需要分配额外的内存，当数据量很多的时候，会占用大量内存；而 Numexpr 实现无中间内存开销，只需要个字符串

```python
# 传统的：
mask=(x>0.5)&(y<0.5)

# Numexpr库:
import numexpr
mask_num=numexpr.evaluate('(x>0.5)&(y<0.5)')
```



## eval() & query()

> eval()和query() 底层调用Numexpr库，结合上述，因此运行速度会快很多;
>
> 当我们要做的不是修改数据而是筛选数据时，使用query()函数。

```python
result1 = df1 + df2 + df3 + df4             # 标准做法：87.1 ms
result2 = pd.eval('df1 + df2 + df3 + df4')   # 42.2 ms
```



## 内存消耗

> 内存消耗可用下面语句估计数据量大小（字节,B）
>
> 1024*1024B=1024KB=1M 

```python
df.values.nbytes
```

